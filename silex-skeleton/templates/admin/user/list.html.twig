{% extends "layout.html.twig" %}
{% block title 'Admin gestion utilisateurs' %}

{% block stylesheet %}
    {{ parent() }}
    <link rel="stylesheet" href="{{asset('css/admin_list.css')}}">
{% endblock %}

{% block content %}

    <section class="admin">
        <h2>Liste des utilisateurs</h2>
        <a href="{{ path('admin_user_ajout') }}" class="add-button">Ajouter un utilisateur</a>
        
        <table>
            <tr>
                <th>Id</th>
                <th>Nom</th>                     
                <th>Prénom</th>
                <th>Email</th>
                <th>Adresse</th>          
                <th>Code postal</th>          
                <th>Ville</th>          
                <th>Téléphone</th>
                <th>Statut</th>                  
                <th>Actions</th>
            </tr>

            {% for user in users %}

            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.lastname }}</td>
                <td>{{ user.firstname }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.address }}</td>
                <td>{{ user.zipcode }}</td>
                <td>{{ user.city }}</td>
                <td>{{ user.phone }}</td>
                <td>{{ user.status }}</td>                

                <td>
                    <a href="{{ path('admin_user_edit', { id: user.id }) }}" >
                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    </a>

                    <a href="#" class="pop" data-id="{{ user.id }}">  
                       <i class="fa fa-trash" aria-hidden="true"></i> 
                    </a>
                </td>
            </tr>


            
            <!-- Aside pour la modale de validation de suppression -->
                <aside id="modal{{ user.id }}" class="modal">  
                    <span>Êtes-vous sûrs de vouloir supprimer l'utilisateur {{ user.id }} ? </span>  
                    <a href="{{ path('admin_user_delete', { id: user.id }) }}" class="btn remove">Supprimer définitivement</a>  
                    <a class="btn cancel closeModal">Annuler</a>  
                </aside> 
        
            {% endfor %}
        </table>
            
        
            
    </section>
    
{% endblock %}
        
{% block javascripts %}      
    {{ parent() }}
    <script src="{{asset('js/modal.js')}}"> </script>  
  {% endblock %}



