{%extends 'layout.html.twig' %}
{% block content %}

<form action="" method="post" id="payment_form">

  <!-- No Stripe.js used; more compliance requirements =( -->
        <label for="email">E-mail</label>
        <input type="text" id="email" name="email" value="">

        <label for="numbercb">Votre code de Carte Bleu</label>
        <input type="text" id="" name="numbercb"  data-stripe="number">   
    
        <label for="monthcb">Mois</label>
        <input type="text" id="" name="monthcb" data-stripe="exp_month"> 

        <label for="yearcb">Année</label>
        <input type="text" id="" name="yearcb" data-stripe="exp_year">  
     
        <label for="cvc">Cryptogramme visuel</label>
        <input type="text" id="cvc" name="cvc" data-stripe="cvc">   

        <input type="submit" value="Paiement">
</form>


<script type="text/javascript" src="https://js.stripe.com/v2/"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


<!-- Ajout de la public key pour test + soumission form: -->
<script>
    Stripe.setPublishableKey('pk_test_EONcjbwaYwY6HwyzCP1D5xR6')
    var $form = $('#payment_form');
    $form.submit(function (e){ 
        e.preventDefault();
        
        $form.find('.button').attr('disabled', true);
    
        Stripe.card.createToken($form, function(status, response){

            if(response.error){
                $form.find('.message').remove();
                $form.prepend('<div class="ui negative message">' + response.error.message + ' </div>');
            }else {
                var token = response.id;
                $form.append($('<input type="hidden" name="stripeToken">').val(token));
                $form.get(0).submit();
            }
        });
    });


<!-- Ajouter un paiement (charge) -->


<!-- Plan paimement (payement mensuel par ex) -->


<!-- Abonnement au plan que l'on a crée: -->



</script>

{% endblock %}